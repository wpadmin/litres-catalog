{% extends "base.html" %}

{% block title %}Авторы аудиокниг — полный список на Большой Ух{% endblock %}

{% block description %}Все авторы аудиокниг на Большой Ух. Более {{ total }} авторов. Слушайте и скачивайте аудиокниги в mp3.{% endblock %}

{% block content %}
<div class="bg-gradient-to-b from-indigo-50 to-white py-16">
    <div class="container mx-auto px-4">
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-gray-900 mb-4">Авторы</h1>
            <p class="text-xl text-gray-500">{{ "{:,}".format(total).replace(',', ' ') }} авторов аудиокниг</p>
        </div>

        <!-- Alphabet filter -->
        <div class="mb-8 overflow-x-auto">
            <div class="flex flex-wrap justify-center gap-2">
                <a href="/authors" class="px-3 py-2 rounded-lg text-sm font-medium transition {% if not request.query_params.get('letter') %}bg-gradient-to-r from-indigo-500 to-indigo-700 text-white{% else %}bg-white text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{% endif %}">
                    Все
                </a>
                {% for letter in 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЭЮЯ' %}
                <a href="/authors?letter={{ letter }}" class="px-3 py-2 rounded-lg text-sm font-medium transition {% if request.query_params.get('letter') == letter %}bg-gradient-to-r from-indigo-500 to-indigo-700 text-white{% else %}bg-white text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{% endif %}">
                    {{ letter }}
                </a>
                {% endfor %}
            </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            {% for author in authors %}
            <a href="/author/{{ author.slug }}"
               class="bg-white rounded-lg p-4 hover:shadow-lg hover:border-yellow-500 border border-gray-100 transition-all group">
                <h2 class="text-sm font-medium text-gray-900 group-hover:text-yellow-500 transition truncate">
                    {{ author.name }}
                </h2>
            </a>
            {% endfor %}
        </div>

        {% if total_pages > 1 %}
        <div class="mt-12 flex justify-center">
            <nav class="flex gap-2">
                {% set letter_param = '&letter=' + request.query_params.get('letter') if request.query_params.get('letter') else '' %}
                {% if page > 1 %}
                <a href="/authors?page={{ page - 1 }}{{ letter_param }}"
                   class="px-4 py-2 border rounded-lg hover:bg-gray-50">← Назад</a>
                {% endif %}

                {% if page > 3 %}
                <a href="/authors?page=1{{ letter_param }}" class="px-4 py-2 border rounded-lg hover:bg-gray-50">1</a>
                <span class="px-2 py-2 text-gray-300">...</span>
                {% endif %}

                {% for p in range([1, page - 2]|max, [total_pages, page + 2]|min + 1) %}
                    {% if p == page %}
                    <span class="px-4 py-2 bg-gradient-to-r from-yellow-500 to-amber-600 text-white rounded-lg">{{ p }}</span>
                    {% else %}
                    <a href="/authors?page={{ p }}{{ letter_param }}"
                       class="px-4 py-2 border rounded-lg hover:bg-gray-50">{{ p }}</a>
                    {% endif %}
                {% endfor %}

                {% if page < total_pages - 2 %}
                <span class="px-2 py-2 text-gray-300">...</span>
                <a href="/authors?page={{ total_pages }}{{ letter_param }}" class="px-4 py-2 border rounded-lg hover:bg-gray-50">{{ total_pages }}</a>
                {% endif %}

                {% if page < total_pages %}
                <a href="/authors?page={{ page + 1 }}{{ letter_param }}"
                   class="px-4 py-2 border rounded-lg hover:bg-gray-50">Далее →</a>
                {% endif %}
            </nav>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
