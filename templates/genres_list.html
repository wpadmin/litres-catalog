{% extends "base.html" %}

{% block title %}Жанры аудиокниг — категории и рубрики на Большой Ух{% endblock %}

{% block description %}Все жанры и категории аудиокниг на Большой Ух. Выберите жанр и слушайте аудиокниги онлайн или скачивайте в mp3.{% endblock %}

{% block content %}
<div class="bg-gradient-to-b from-amber-50 to-white py-16">
    <div class="container mx-auto">
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold text-gray-900 mb-4">Жанры</h1>
            <p class="text-xl text-gray-500">{{ total }} категорий аудиокниг</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {% for genre in genres %}
            <a href="/genre/{{ genre.slug }}"
               class="bg-white rounded-lg p-6 hover:shadow-lg hover:border-amber-500 border border-gray-100 transition-all group">
                <h2 class="text-lg font-medium text-gray-900 group-hover:text-amber-500 transition">
                    {{ genre.name }}
                </h2>
            </a>
            {% endfor %}
        </div>

        {% if total_pages > 1 %}
        <div class="mt-12 flex justify-center">
            <nav class="flex gap-2">
                {% if page > 1 %}
                <a href="/genres?page={{ page - 1 }}"
                   class="px-4 py-2 border rounded-lg hover:bg-gray-50">← Назад</a>
                {% endif %}

                {% if page > 3 %}
                <a href="/genres?page=1" class="px-4 py-2 border rounded-lg hover:bg-gray-50">1</a>
                <span class="px-2 py-2 text-gray-300">...</span>
                {% endif %}

                {% for p in range([1, page - 2]|max, [total_pages, page + 2]|min + 1) %}
                    {% if p == page %}
                    <span class="px-4 py-2 bg-amber-500 text-white rounded-lg">{{ p }}</span>
                    {% else %}
                    <a href="/genres?page={{ p }}"
                       class="px-4 py-2 border rounded-lg hover:bg-gray-50">{{ p }}</a>
                    {% endif %}
                {% endfor %}

                {% if page < total_pages - 2 %}
                <span class="px-2 py-2 text-gray-300">...</span>
                <a href="/genres?page={{ total_pages }}" class="px-4 py-2 border rounded-lg hover:bg-gray-50">{{ total_pages }}</a>
                {% endif %}

                {% if page < total_pages %}
                <a href="/genres?page={{ page + 1 }}"
                   class="px-4 py-2 border rounded-lg hover:bg-gray-50">Далее →</a>
                {% endif %}
            </nav>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
